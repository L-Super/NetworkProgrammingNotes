对已连接的套接字执行shutdown操作
```c
#include <sys/socket.h>
int shutdown(int sockfd, int howto)；
/*
若成功则为0，若出错则为-1。
*/
```
howto是这个函数的设置选项，它的设置有三个主要选项：

- `SHUT_RD` (0)：关闭连接的“读”这个方向，对该套接字进行读操作直接返回EOF。从数据角度来看，套接字上接收缓冲区已有的数据将被丢弃，如果再有新的数据流到达，会对数据进行ACK，然后悄悄地丢弃。也就是说，对端还是会接收到ACK，在这种情况下根本不知道数据已经被丢弃了。
- `SHUT_WR` (1)：关闭连接的“写”这个方向，这就是常被称为“半关闭”的连接。此时，不管套接字引用计数的值是多少，都会直接关闭连接的写方向。套接字上发送缓冲区已有的数据将被立即发送出去，并发送一个FIN报文给对端。应用程序如果对该套接字进行写操作会报错。
- `SHUT_RDWR` (2)：相当于SHUT_RD和SHUT_WR操作各一次，关闭套接字的读和写两个方向。
例如：
```c
shutdown(socket_fd, 1)
```
**使用`SHUT_RDWR`来调用shutdown和`close()`差别**

第一个差别：close会关闭连接，并释放所有连接对应的资源，而shutdown并不会释放掉套接字和所有的资源。
第二个差别：close存在引用计数的概念，并不一定导致该套接字不可用；shutdown则不管引用计数，直接使得该套接字不可用，如果有别的进程企图使用该套接字，将会受到影响。
第三个差别：close的引用计数导致不一定会发出FIN结束报文，而shutdown则总是会发出FIN结束报文，这在我们打算关闭连接通知对端的时候，是非常重要的。