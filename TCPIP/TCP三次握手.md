![[../images/Pasted image 20221130205033.png]]
具体的过程：

1. 客户端的协议栈向服务器端发送了SYN包，并告诉服务器端当前发送序列号j，客户端进入SYNC\_SENT状态；
2. 服务器端的协议栈收到这个包之后，和客户端进行ACK应答，应答的值为j+1，表示对SYN包j的确认，同时服务器也发送一个SYN包，告诉客户端当前我的发送序列号为k，服务器端进入SYNC\_RCVD状态；
3. 客户端协议栈收到ACK之后，使得应用程序从connect调用返回，表示客户端到服务器端的单向连接建立成功，客户端的状态为ESTABLISHED，同时客户端协议栈也会对服务器端的SYN包进行应答，应答数据为k+1；
4. 应答包到达服务器端后，服务器端协议栈使得accept阻塞调用返回，这个时候服务器端到客户端的单向连接也建立成功，服务器端也进入ESTABLISHED状态。

形象一点的比喻是这样的，有A和B想进行通话：

- A先对B说：“喂，你在么？我在的，我的口令是j。”
- B收到之后大声回答：“我收到你的口令j并准备好了，你准备好了吗？我的口令是k。”
- A收到之后也大声回答：“我收到你的口令k并准备好了，我们开始吧。”

可以看到，这样的应答过程总共进行了三次，这就是TCP连接建立之所以被叫为“三次握手”的原因了。