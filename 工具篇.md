# ping
测试网络是否可达。ping 是基于一种叫做 ICMP 的协议开发的，ICMP 又是一种基于 IP 协议的控制协议，翻译为网际控制协议。

![image-20230114231216134](images/image-20230114231216134.png)
每次显示是按照 sequence 序列号（`icmp_seq`）排序显示的，一并显示的包括 TTL（time to live），反映了两个 IP 地址之间传输的时间。最后两行还显示统计信息，如最小时间、平均时间等。

ICMP报文格式如图所示，每一个ICMP消息都将包含引发这条ICMP消息的数据包的完全IP包头，ICMP报文则作为IP数据包的数据部分封装在IP数据包内部。

![](images/Pasted%20image%2020230114235918.png)

![ICMP](Excalidraw/ICMP.md)

ICMP在IP报文后加入了新的内容，这些内容包括：
- 类型：即ICMP的类型, 其中ping的请求类型为8，应答为0。
- 代码：进一步划分ICMP的类型, 用来查找产生错误的原因。
- 校验和：用于检查错误的数据。
- 标识符：通过标识符来确认是谁发送的控制协议，可以是进程ID。
- 序列号：唯一确定的一个报文，前面ping名字执行后显示的icmp\_seq就是这个值。


当我们发起 ping 命令时，ping 程序实际上会组装成如图的一个 IP 报文。报文的目的地址为 ping 的目标地址，源地址就是发送 ping 命令时的主机地址，同时按照 ICMP 报文格式填上数据，在可选数据上可以填上发送时的时间戳。 

IP 报文通过 ARP 协议，源地址和目的地址被翻译成 MAC 地址，经过数据链路层后，报文被传输出去。当报文到达目的地址之后，目的地址所在的主机也按照 ICMP 协议进行应答。之所以叫做协议，是因为双方都会遵守这个报文格式，并且也会按照格式进行发送 - 应答。应答数据到达源地址之后，ping 命令可以通过再次解析 ICMP 报文，对比序列号，计算时间戳等来完成每个发送 - 应答的显示，最终展示出 ping 显示的格式。

# ifconfig
Windows 有一个 ipconfig 命令，用来显示当前的网络设备列表。Linux 有一个对应的命令叫做 ifconfig
